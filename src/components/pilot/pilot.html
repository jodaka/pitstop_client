<div class="k-page k-page_pilot">

    <nav-header data-section="pilot"></nav-header>

    <h3 class="k-header">Статистика по пилоту {{:: $ctrl.name }}</h3>

    <div class="k-table k-driver__stats">
        <div class="k-table-header">
            <div class="k-table-header__cell k-driver-club__cell_name"></div>
            <div class="k-table-header__cell k-driver-club__cell_date">Количество гонок</div>
            <div class="k-table-header__cell k-driver-club__cell_winner">Лучшее время</div>
        </div>
        <div class="k-table-row k-table-row_zebra" 
            ng-repeat="(key,value) in ::$ctrl.clubStats track by $index">
            <div class="k-table-cell k-driver-club__header ">{{:: key}}</div>
            <div class="k-table-cell">{{:: value.count}}</div>
            <div class="k-table-cell">{{:: value.best}}</div>
        </div>
    </div>

    <h3 class="k-header">Заезды с участием пилота</h3>

    <div class="k-table">
        <div class="k-table-header">
            <div class="k-table-header__cell k-pilot__cell_name">Заезд</div>
            <div class="k-table-header__cell k-pilot__cell_club">Клуб</div>
            <div class="k-table-header__cell k-pilot__cell_date">Дата</div>
            <div class="k-table-header__cell k-pilot__cell_kart">Карт</div>
            <div class="k-table-header__cell k-pilot__cell_pos">Позиция</div>
            <div class="k-table-header__cell k-pilot__cell_best">Лучшее</div>
            <div class="k-table-header__cell k-pilot__cell_avg">Среднее</div>
        </div>

        <div class="k-table-row k-table-row_zebra" 
            ng-repeat="race in ::$ctrl.races track by $index">
            <div class="k-table-cell k-pilot__cell_name">
                <a class="k-link" 
                    ui-sref="app.race({club:'{{::race.clubName}}', raceId:'{{::race.id}}' })">{{:: race.name }}</a>
            </div>

            <div class="k-table-cell k-pilot__cell_club">{{:: race.clubTitle }}</div>
            <div class="k-table-cell k-pilot__cell_date" ng-bind-html="race.date | raceDate"></div>
            <div class="k-table-cell k-pilot__cell_kart">{{:: race.kart }}</div>
            <div class="k-table-cell k-pilot__cell_pos">{{:: race.pos }}</div>
            <div class="k-table-cell k-pilot__cell_best">{{:: race.best }}</div>
            <div class="k-table-cell k-pilot__cell_avg">{{:: race.average }}</div>
        </div>
    </div>

    <div class="k-paging-holder">
        <div class="k-paging">
            <div class="k-paging__page" 
                ng-class="::{ 'k-paging__page_selected': p == page }"
                ng-repeat="p in ::$ctrl.paging track by $index"
                ng-click="$ctrl.changePage(p)">
                {{:: p }}
            </div>
        </div>
    </div>

</div>
